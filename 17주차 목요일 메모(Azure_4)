17주차 목요일 메모 Microsoft(Azure4)

랩6과7
# AZ-104T00A Administer Azure Storage
Learning Objectives - Administer Azure Storage

# 스토리지 계정 구성
Azure 저장소 구현
복제 전략 결정
보안 스토리지 엔드포인트
Azure 저장소 서비스 살펴보기
스토리지 계정 종류 결정
스토리지 액세스
데모 ‒ 스토리지 엔드포인트 보안

-Azure 저장소 구현 
파일, 메시지, 테이블 및 기타 유형의 정보를 저장하는 데 사용할 수 있는 서비스
내구성, 보안성, 확장성, 관리성, 접 근성
가상 머신, 비정형 데이터, 정형 데이터용 스토리지
두 가지 계층: 프리미엄 및 기준

-Azure 저장소 서비스 살펴보기
Azure 컨테이너: 대규모로 확장 가능 한 개체 저장소 텍스트 및 바이너리 데이터
Azure Tables: 구조화된 비관계형 데이터를 저장하는 데 적합합니다.
Azure 큐: 애플리케이션 구성 요소 간의 안정 적인 메시징을 위한 메시징 저장소
Azure Files: 클라우드 또는 온-프레미스 배포를 위한 관리형 파일 공유

-스토리지 계정 종류 결정
모든 스토리지 계정은 미사용 데이터에 대해 SSE(Storage Service Encryption)를 사용하여 암호화됩니다.
 

 
 

-스토리지 액세스
모든 객체에는 계정 이름과 스토리지 유형에 따라 고유한 URL 주소가 있습니다.
원하는 경우 사용자 정의 도메인 이름을 구성할 수 있습니다.
CNAME 레코드    // 표적
blobs.contoso.com // contosoblobs.blob.core.windows.net

-보안 스토리지 엔드포인트
방화벽 및 가상 네트워크는 특정 서브넷의 스토리지 계정에 대한 가상 네트워크 또는 공용 IP 액세스를 제한합니다.
동일한 Azure 지역 또는 지역 쌍 스토리지 계정으로 서브넷 및 가상 네트워크가 존재해야 합니다.

# Blob 저장소 구성 (AWS S3와 같음)
Blob 저장소 구현
데모 ‒ Blob Storage
Blob 컨테이너 만들기
Blob 액세스 계층 만들기
Blob 수명 주기 관리 규칙 추가
Blob 개체 복제 결정
요약 및 리소스

- Blob 저장소 구현
구조화되지 않은 데이터를 클라우드에 저장합니다.
모든 유형의 텍스트 또는 바이너리 데이터를 저장할 수 있습니다.
객체 스토리지 라고도 합니다.
일반적인 용도:
 • 이미지나 문서를 브라우저에 직접 제공
 • 분산 액세스를 위한 파일 저장
 • 스트리밍 비디오 및 오디오
 • 백업 및 복원, 재해 복구, 보관을 위한 데이터 저장
 • 온프레미스 또는 Azure 호스팅 서비스를 통한 분석을 위한 데이터 저장

-Blob 컨테이너 만들기
모든 Blob은 컨테이너에 있어야 합니다.
계정에는 무제한 컨테이너가 있습니다.
컨테이너는 무제한의 Blob을 가질 수 있습니다.
비공개 Blob ‒ 익명 액세스 불가
Blob 액세스 ‒ 다음에 대한 익명 공개 읽기 액세스
컨테이너 액세스 ‒ Blob을 포함한 전체 컨테이너에 대한 익명 공개 읽기및 목록 액세스

- Blob 액세스 계층 만들기 
핫 계층 ‒ 자주 액세스하거나 수정하는 데이터
쿨 계층 ‒ 자주 액세스하거나 수정하지 않고 최소 30일 동안 저장하는 데이터
콜드 계층 ‒ 자주 액세스하거나 수정하지 않고 최 소 90일 동안 저장하는 데이터
아카이브 ‒ 몇 시간의 검색 대기 시간을 허용 하고 최 소 180일 동안 아카이브 계층에 유지되는 데이터

-Blob 수명 주기 관리 규칙 추가
성능 및 비용 최적화를 위해 Blob을 더 차가운 스토리지 계층으로 전환
수명 주기가 끝나면 Blob 삭제
저장소의 필터링된 경로에 계정규칙 적용

-Blob 개체 복제 결정
다른 지역과 비동기식
읽기 요청에 대한 대기 시간을 최소화합니다.
컴퓨팅 워크로드의 효율성 향상
데이터 배포 최적화
비용 최적화

# 스토리지 보안 구성
URI 및 SAS 매개변수 식별
데모 ‒ SAS(포털)
요약 및 리소스
공유 액세스 서명 만들기
스토리지 보안 모범 사례 적용
스토리지 보안 전략 검토
스토리지 서비스 암호화 결정
고객 관리형 키 생성

-스토리지 보안 전략 검토
스토리지 서비스 암호화
Azure AD 및 RBAC를 사용한 인증
전송 중인 데이터에 대한 클라이언트 측 암호화, HTTPS 및 SMB 3.0
Azure 디스크 암호화
공유 액세스 서명 ‒위임된 액세스
공유 키 ‒ 암호화됨 서명 문자열
컨테이너 및 Blob에 대한 익명 액세스

-공유 액세스 서명 만들기 
리소스에 대한 위임된 액세스 제공
스토리지 계정 키를 공유하지 않고 클라이언트에 액세스 권한을부여합니다.
계정 SAS는 하나 이상의 스토리지 서비스 리소스에 대한 액세스 권한을 위임합니다.
서비스 SAS는 스토리지 서비스 중 하나의 리소스에 대한 액세스 권한을 위임합니다.

-URI 및 SAS 매개변수 식별
• SAS는 하나 이상의 스토리지 리소스를 가리키는 서명된 URI입니다. • 스토리지 리 소스 URI와 SAS 토큰으로 구성됩니다.
 
리소스 URI, 스토리지 서비스 버전, 서비스, 리소스 유형, 시작 시간, 만료 시간, 리소스, 권한, IP 범위, 프로토콜, 서명에 대한 매개변수를 포함합니다.

-스토리지 서비스 암호화 결정
보안 및 규정 준수를 위해 데이터를 보호합니다.
데이터를 자동으로 암호화하고 해독합니다.
256비트 AES 암호화를 통해 암호화됨
모든 신규 및 기존 스토리지 계정에 대해 활성화되며 비활성화할 수 없습니다.
사용자에게 투명합니다

-고객 관리형 키 생성
Azure Key Vault를 사용하여 암호화 키 관리
나만의 암호화 키를 만들고키 자격 증명 모음에 저장
Azure Key Vault의 API를 사용하여 암호화 키 생성
맞춤 키를 사용하면 더 많은 유연성을 얻을 수 있습니다.

-스토리지 보안 모범 사례 적용
SAS를 생성하거나 배포하려면 항상 HTTPS를 사용하세요.
Storage Analytics를 사용하여 애플리케이션 모니터링
임시 SAS에서 단기 만료 시간 사용
액세스할 리소스를 구체적으로 지정하세요.
SAS가 항상 올바른 선택이라고 가정하지 마십시오.
가능한 경우 저장된 액세스 정책을 참조하세요. 
모든 사용량에 대해 계정에 요금이 청구된다는 점
SAS를 사용하여 작성된 데이터 유효성 검사
SAS 시작 시간에 주의하세요

# Azure 파일 및 파일 동기화 구성
파일을 Blob과 비교
데모 ‒ 파일 공유
Azure 파일 동기화 구현
파일 공유 관리
파일 공유 스냅샷 생성
도구를 사용하여 스토리지 구성

-파일을 Blob과 비교
Azure Files; 어디서나 저장된 파일에 액세스할 수 있는 SMB 인터페이스, 클라이언트 라이브러리 및 REST 인터 페이스 
• 애플리케이션을 클라우드로 리프트 앤 시프트
• 여러 가상 머신에 걸쳐 공유 데이터 저장
• 많은 가상 머신에서 액세스해야 하는 개발 및 디버깅 도구를 저장합니다.

Azure Blobs; 구조화되지 않은 데이터(플랫 네임스페 이스)를 블록 Blob에 대규모로 저장 하고 액세스 할 수 있는 클라이언트 라이브러리 및 REST 인터 페이스
• 스트리밍 및 임의 액세스 시나리오 지원
• 어디서나 애플리케이션 데이터에 액세스

-파일 공유 관리
파일 공유 할당량
Windows ‒ 포트 445가 열려 있는지 확인하세요.
MacOS ‒ 드라이브 마운트
Linux ‒ 드라이브 마운트
보안 전송 필요 ‒ SMB 3.0 암호화

-파일 공유 스냅샷 생성
특정 시점의 공유 상태를 캡처 하는 증분 스냅샷 
데이터의 읽기 전용 복사본입니다. 
파일 공유 수준의 스냅샷, 그리고 복원 시간: 파일레벨
• 애플리케이션 오류 및 데이터 손상으로부터 보호
• 실수로 삭제하거나 의도하지 않은 변경으로부터 보호 
• 일반 백업 목적

# 랩 07 ‒ Azure Storage 관리
시나리오
현재 온-프레미스 데이터 저장소에 있는 파일을 저장하기 위해 Azure Storage의 사용을 평가해야 합니다.
이러한 파일 중 다수는 자주 액세스되지 않지만 몇가지 예외가 있습니다. 자주 액세스하지 않는 파일을 저렴한 스토리지 계층에 배치하여 스토리지 비용을 최소화하려고 합니다 . 또한 네트워크 액세스, 인증, 권한 부여 및 복제를 포함하여 Azure Storage가 제공하는 다양한 보호메커니즘을 탐색할 계획입니다. 마지 막으로 Azure Files 서비스가 온-프레미스 파일 공유를 호스팅하는 데 어느 정도 적합한지 결정하려고 합니다.

작업>> 1. 랩 환경 프로비저닝 / 2. Azure storage 계정생성 및 구성 / 3. Blob storage 관리 / 4. Azure storage 인증 및 권한부여를 관리 / 5. 생성 및 구성 Azure 파일 공유 / 6. Azure 저장소에 대한 네트워크 액세스를 관리.
 
