23.10.12 윈도우즈서버 2차시
개요
** 도메인 (Domain) 은 Active Directory의 가장 기본이 되는 단위이다. AD가 설치된 윈도우 서버가 하나의 도메인이라고 보면됨. 하나의 큰 단위의 범위를 표현하고 도메인이 여러개일 때 부모 도메인, 자식 도메인으로 구분할 수 있다.

** 디렉토리 서비스(Directory Service) : 분산된 네트워크 환경에서 네트워크의 사용자와 네트워크 자원에 대한 정보를  중앙의 저장소에 통합하고 조직 및 관리하는 응용 소프트웨어. 사용자와 공유된 자원 사이에서 추상 계층으로 동작.
 - 디렉토리 서비스 안에서 관리되고 있는, 이름이 있는 객체에 대한 정보를 가지고 있는 DB를 말하는 '디렉토리' 그 자체와 혼동하면 안된다.

**Active Directory의 장점: 서버가 많아질수록, 인증절차가 복잡해지는데 AD DS(도메인서비스)로 하나의 서버에서 모든 인증을 담당할 수 있다. 
-공유자원 정보검색이 편리하다.
-네트워크 환경에서 Domain자원을 공유할 수 있다. 본사&지사 직원들이 개인pc에 모든정보를 보관할 필요가 없다는 뜻이다.

저번차시에 만들었던 DOMAIN32\Administrator 계정에 접속한다.
-서버관리자>대시보드>우측상단 도구>Active Directory 사용자 및 컴퓨터 탭으로 이동
 
액티브 디렉토리를 설치할때, 현재 좌측에 있는 폴더로 있는 것들을 'Container'라고 한다.
=Built in container 
"Users"폴더를 누르니 계정이 많이 등장한다. 사람 하나는 유저, 사람 둘은 그룹 이다.

-'domain23.co.kr'를 우클릭하고 새로만들기>조직 구성 단위 를 누르면
새 개체-조직 구성 단위가 등장하며, 체크상태가 디폴트인데 해제하지 않도록 한다.
이름을 '서울 본사 임직원'으로 설정, 또 이를 반복해서 '부산 지사 임직원'을 생성한다.

-1단계. 이번에는 '서울 본사 임직원'컨테이너 안에 우클릭 새로만들기>조직 구성 단위를 눌러서
부서명이 드러나도록 'IT 운영팀'을 생성 (이번에는 체크를 해제).
이를 반복해서 'IT 개발팀'을 생성. 
>>만약에 개체보호를 풀지 않아서 삭제가 안된다면 '보기'>'고급기능'>삭제할 개체 속성>개체 탭> '실수로 삭제되지 않도록 개체보호 를 체크해제' 후 삭제하면 된다.

-2단계. IT운영팀안에 '그룹'을 또 만든다 
 
그룹범위: 글로벌/ 그룹이름을 'Dev_1' 으로 설정한다, 또한 'OPS_1' 그룹도 추가.

-3단계. 이번엔 사용자(User)을 생성할 차례다. dev_1를 우클릭하여 이동_ 서울본사의 '운영팀'이아니라 '개발팀'으로 부서이동. 운영팀 안에 사용자를 생성.
 
LEE / SONG YEE/ LSY / 로그온이름 admin1을 생성해준다. 
 
-다음은 암호로, 사용하고자 하는 암호를 넣는다.
암호 옵션이 중요한 부분이다. 다음 로그온 사용자의 암호변경은 의무사항이 아니므로 체크해제해도 된다. 암호변경을 할 수 없음 옵션은 GUEST 유저에게 보통 부여를 해서 사용하게 한다. 
정책상 암호사용기간 제한없음은 42일이다. 
계정사용안함 옵션은 일시적으로 내가 계정을 사용하지 못할 때 임시적으로 비활성화하는 옵션이다.
모두 체크해제한뒤 계정을 만들면 admin1@domain23.co.kr 이라는 유저가 생긴다.

-OPS_1 그룹 속성을 열고 구성원 추가> 개체 이름을 admin1입력>이름확인을 하면 방금만든 이송이 계정이 확인되며 이를 적용하면 된다. 
 이송이 사용자를 우클릭해서 속성을 띄우면 더욱 많은 옵션탭이 나타나는데, '소속그룹'에서 이를 확인할 수 있다.

-Domain admins 속성> 구성원에 추가> adm를 입력하면 이송이 계정이 보인다. 이를 추가면 도메인 관리자가 된다. 운영팀 컨테이너의 OPS_1에 해당하는 모든 사용자가 도메인 관리자가 되도록 역할부여를 하고싶으면
Users> domain admins 속성>추가>개체이름탭에 OPS_1 이름확인 하면 이것이 가능하다. 

-운영팀 이송이 계정을 우클릭해서 탭 메뉴에서 '계정'> 로그인 시간- 로그온을 시간대에 맞춰 사용하도록 할 수 있다. 월09시~17시까지 허용하면 출~퇴근 사이 시간을 이용가능하다.
사용자를 우클릭하여 개체복사(복사) 
KIM CHO RONG KCR. 계정을 만듬 김초롱 admin2@domain23.co.kr
개체복사로 만들면 중급이다.

-보안정책 설정
서버관리자 대시보드 - 도구 - 로컬 보안정책
 
Password Policy 컨테이너를 보면 
password must meet complexity requirements가 enabled 된것을 알 수 있다. 이것의 속성을 사용안함으로 바꾸면 될텐데, 해당 설정을 보안을 위해 비활시켜놓았다. 

-Local Policy 컨테이너를 보면
user rights assignment를 찾을 수 있다. Shut down the system을 보면 
 
Administrators 를 볼 수 있는데 
사용자 및 컴퓨터로 다시 넘어가서 Builtin 컨테이너> administrator의 구성원에 
administrator, domain admins, enterprise admins 가 있음으로 그들에게 권한있음을 알 수 있다.

-삭제 관련: 그룹을 지워도, 구성원이 같이 삭제되지는 않는다. 삭제를 위해서는 위를 참조.
*보기>고급>개체삭제 비활체크 해제

-admin1 계정을 다시 생성한다.
소속그룹> Domain Admins >추가
로그아웃 > 다른유저 admin23@domain23.co.kr / pw로 접속하면 된다.

-공유하기
다시 어드미니스트레이터로 와서 data폴더를 만들고 abc.txt를 만들어두고 폴더단위 공유를 시도
공유 탭>고급공유> 동시사용자수 제한을 설정할수 있다.(라이센스 프로그램의 경우 설정)
권한>Everyone의 사용권한에서 모든권한을 부여해보자.

-네트워크 드라이브 연결
드라이브를 폴더와 연결하면 쓸수 있다. 아까만든 공유폴더 data를 넣고 생성하면
네트워크위치- data 공유폴더 드라이브가 생긴다.
 
=같은방법: win+r 로 실행창> \\WIN-SERVER-1\data 를 넣고 OK하면 바로 생성됨.
액티브 디렉토리와 관련된것을 windows server뿐만 아니라 AZURE에서도 사용가능하니 참조하도록 한다.

-서버1에 Test_OU 컨테이너에 공유폴더를 생성한다.
 
회계자료 / \\172.25.3.31\data 로 공유폴더를 생성하고 data2를 다시만들자 권한부여 후 공유
개발자료 / \\172.25.3.31\data2 로 생성한다.  

방금만든 개발자료>속성>을 열면 '키워드'버튼이 따로 생긴것을 알 수 있다. 여기에 새값으로 'python' 'node_js' 'lambda' 를 추가해둔다 / data2폴더에 Dev_ops.txt를 만들어 python node_js lambda를 입력해두고 저장해주자
액티브 디렉토리의 강점을 알아본다.

-서버2로 돌아가서 네트워크 드라이브를 연결
\\172.25.3.31\data2로 가는 드라이브를 생성한다. 그러면 위에서만든 Dev_ops.txt파일이 보인다. 

-프린터 및 스캐너 추가
내 프린터는 구형입니다. 찾도록 도와주십시오> or 수동으로 
프린터 Generic/Text Only 드라이버를 만든다. 위치는 A동 101호.
Generic IBM Graphics 9pin wide 도 만들고, 위치 A동 201호
MS Publisher Color Printer도 만들고, 위치 B동 101호 로 생성해두자.

첫째 101- 프린터 속성으로가서 공유탭>디렉토리에 나열을 체크하고 확인.
나머지 201 , 101호도 추가해주자.
-다시 액티브디렉토리 사용자 및 컴퓨터로 들어가서
보기>사용자 연락처 그룹 및 컴퓨터를 컨테이너로에 체크, 고급기능 체크> 
그러면 'Domain Controllers'\WIN-SERVER-1\로 가면 프린터 3개가 나란히등장하는데 이를
Test_OU컨테이너로 이동시킨다(드래그앤 드롭) 
 
-서버2로 들어가서 프린터및 스캐너로 가서 '이름으로 공유 프린터 선택'을 보자.
서버1에서 연결된 아이피를 입력하거나 Browse.. 버튼을 눌러 WIN-SERVER-1으로 들어가면
 1에서 만든것이 등장

 
